var ProductList=ProductList||{};ProductList.Cart=function(){"use strict";function a(a){j[a]=j[a]||0,j[a]+=1}function b(a){j[a]=j[a]||0,j[a]>0&&(j[a]-=1)}function c(c,d){d>0?a(c):b(c),ProductList.PubSub.publish("itemUpdated",[c])}function d(){var a=null;return k=ProductList.Store.getProducts(),_.reduce(j,function(b,c,d){return a=ProductList.Utils.getItemById(k,d),b+parseInt(a.getPrice(),10)*c},0)}function e(){var a=document.getElementById("cart-input");a.value=d()}function f(a){return j[a]}function g(){return j}function h(){var a=null;_.forIn(j,function(b,c){a=ProductList.Utils.getItemById(k,c),a.setStock(a.getStock()-b)}),j={},ProductList.PubSub.publish("orderCommitted",[])}function i(){ProductList.PubSub.subscribe("itemUpdated",e),ProductList.PubSub.subscribe("couponApplied",e),ProductList.PubSub.subscribe("orderCommitted",e)}var j={},k=ProductList.Store.getProducts();return i(),{updateCart:e,updateItem:c,getItemCount:f,commitOrder:h,getItemsSummary:g,getTotalPrice:d}}();