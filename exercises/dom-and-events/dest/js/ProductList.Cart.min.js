var ProductList=ProductList||{};ProductList.Cart=function(){"use strict";function a(a){j[a]=j[a]||0,j[a]+=1}function b(a){j[a]=j[a]||0,j[a]>0&&(j[a]-=1)}function c(c,d){d>0?a(c):b(c),ProductList.PubSub.publish("itemUpdated",[c])}function d(){var a,b="",c=0;k=ProductList.Store.getProducts();for(b in j)j.hasOwnProperty(b)&&(a=ProductList.Utils.getItemById(k,b),c+=parseInt(a.getPrice(),10)*j[b]);return c}function e(){var a=document.getElementById("cart-input");a.value=d()}function f(a){return j[a]}function g(){return j}function h(){var a="",b=null;for(a in j)j.hasOwnProperty(a)&&(b=ProductList.Utils.getItemById(k,a),b.setStock(b.getStock()-j[a]));j={},ProductList.PubSub.publish("orderCommitted",[])}function i(){ProductList.PubSub.subscribe("itemUpdated",e),ProductList.PubSub.subscribe("couponApplied",e),ProductList.PubSub.subscribe("orderCommitted",e)}var j={},k=ProductList.Store.getProducts();return i(),{updateCart:e,updateItem:c,getItemCount:f,commitOrder:h,getItemsSummary:g,getTotalPrice:d}}();